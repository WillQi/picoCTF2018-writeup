# Secret Agent

**Points:** 250

**Description**
> Here's a little website that hasn't fully been finished. But I heard google gets all your info anyway. `http://2018shell1.picoctf.com:46162` ([link](http://2018shell1.picoctf.com:46162))

**Hints**
> How can your browser pretend to be something else?

## Solution

When we visit the webpage and click the "Flag" button, we get the error that we are not google, along with our user agent. It is referencing Google's webcrawler. If we switch our user agent to `Googlebot` and request `/flag`, we will be able to see that it returns the flag.

```js
const fetch = require("node-fetch");
fetch("http://2018shell1.picoctf.com:46162/flag", {
    headers: {
        "User-Agent": "Googlebot"
    }
}).then(r => r.text()).then(text => {
    console.log(text.match(/picoCTF{(.*)}/)[0]);
});
```

An alternative method of getting this flag is to install a User-Agent extension. We use Chrome, and therefore installed [this one](https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg). After installing it, we simply change our user-agent to Googlebot and the page refreshes with our flag.

Our flag is `picoCTF{s3cr3t_ag3nt_m4n_ac87e6a7}`
